<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.283">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>BEE 4750 - Fall 2023 - BEE 4750 Homework 4: Generating Capacity Expansion</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<!-- MathJax 3 -->
<script>
window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta property="og:title" content="BEE 4750 - Fall 2023 - BEE 4750 Homework 4: Generating Capacity Expansion">
<meta property="og:description" content="">
<meta property="og:site-name" content="BEE 4750 - Fall 2023">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">BEE 4750/5750</li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header sidebar-header-stacked">
      <a href="../../index.html" class="sidebar-logo-link">
      <img src="../../_assets/logos/cornell-reduced-red.svg" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">BEE 4750/5750</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/vsrikrish/environmental-systems-analysis" title="Github Repository" class="quarto-navigation-tool px-1" aria-label="Github Repository"><i class="bi bi-github"></i></a>
    <a href="https://canvas.cornell.edu" title="Canvas" class="quarto-navigation-tool px-1" aria-label="Canvas"><i class="bi bi-journal-check"></i></a>
    <a href="https://edstem.org" title="Ed Discussion" class="quarto-navigation-tool px-1" aria-label="Ed Discussion"><i class="bi bi-chat-fill"></i></a>
    <a href="https://gradescope.com" title="Gradescope" class="quarto-navigation-tool px-1" aria-label="Gradescope"><i class="bi bi-bar-chart-fill"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Course Information</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../schedule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Schedule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../hw.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../hw/hw01/hw01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../hw/hw02/hw02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../hw/hw03/hw03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../hw/hw04/hw04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../hw/hw05/hw05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Homework 5</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../labs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Labs</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab01/lab01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab02/lab02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab03/lab03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../labs/lab04/lab04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lab 4</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Final Project</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tools Setup</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">FAQ</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Tutorials</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/julia-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Julia Basics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/julia-plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Making Plots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/latex-notebook.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Math in Notebooks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tutorials/julia-jump.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Solving Linear Programs</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Supplemental Notes</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Resources</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/julia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Julia</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../resources/optimization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Optimization and Decision-Making</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#instructions" id="toc-instructions" class="nav-link" data-scroll-target="#instructions">Instructions</a></li>
  <li><a href="#load-environment" id="toc-load-environment" class="nav-link" data-scroll-target="#load-environment">Load Environment</a></li>
  </ul></li>
  <li><a href="#problems-total-100-points" id="toc-problems-total-100-points" class="nav-link" data-scroll-target="#problems-total-100-points">Problems (Total: 100 Points)</a>
  <ul class="collapse">
  <li><a href="#problem-1-22-points" id="toc-problem-1-22-points" class="nav-link" data-scroll-target="#problem-1-22-points">Problem 1 (22 points)</a></li>
  <li><a href="#problem-2-18-points" id="toc-problem-2-18-points" class="nav-link" data-scroll-target="#problem-2-18-points">Problem 2 (18 points)</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/vsrikrish/environmental-systems-analysis/edit/main/solutions/hw04/hw04-solution.qmd" class="toc-action">Edit this page</a></p><p><a href="https://github.com/vsrikrish/environmental-systems-analysis/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">BEE 4750 Homework 4: Generating Capacity Expansion</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<div class="callout callout-style-simple callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Due Date
</div>
</div>
<div class="callout-body-container callout-body">
<p>Friday, 10/27/23, 9:00pm</p>
</div>
</div>
<div class="callout callout-style-simple callout-caution">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>If you are enrolled in the course, make sure that you use the GitHub Classroom link provided in Ed Discussion, or you may not be able to get help if you run into problems.</p>
<p>Otherwise, you can <a href="https://github.com/BEE4750/hw04">find the Github repository here</a>.</p>
</div>
</div>
</div>
<section id="overview" class="level2">
<h2 class="anchored" data-anchor-id="overview">Overview</h2>
<section id="instructions" class="level3">
<h3 class="anchored" data-anchor-id="instructions">Instructions</h3>
<ul>
<li>In Problem 1, you will formulate, solve, and analyze a standard generating capacity expansion problem.</li>
<li>In Problem 2, you will add a CO<sub>2</sub> constraint to the capacity expansion problem and identify changes in the resulting solution.</li>
</ul>
</section>
<section id="load-environment" class="level3">
<h3 class="anchored" data-anchor-id="load-environment">Load Environment</h3>
<p>The following code loads the environment and makes sure all needed packages are installed. This should be at the start of most Julia scripts.</p>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="bu">Pkg</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">activate</span>(<span class="pp">@__DIR__</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="bu">Pkg</span>.<span class="fu">instantiate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">JuMP</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">HiGHS</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">DataFrames</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Plots</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Measures</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">CSV</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">MarkdownTables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="problems-total-100-points" class="level2">
<h2 class="anchored" data-anchor-id="problems-total-100-points">Problems (Total: 100 Points)</h2>
<p>For this problem, we will use hourly load (demand) data from 2013 in New York’s Zone C (which includes Ithaca). The load data is loaded and plotted below in <a href="#fig-demand">Figure&nbsp;1</a>.</p>
<div id="fig-demand" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load the data, pull Zone C, and reformat the DataFrame</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>NY_demand <span class="op">=</span> <span class="fu">DataFrame</span>(CSV.<span class="fu">File</span>(<span class="st">"data/2013_hourly_load_NY.csv"</span>))</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rename!</span>(NY_demand, <span class="op">:</span><span class="st">"Time Stamp"</span> <span class="op">=&gt;</span> <span class="op">:</span><span class="dt">Date</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>demand <span class="op">=</span> NY_demand[<span class="op">:</span>, [<span class="op">:</span><span class="dt">Date</span>, <span class="op">:</span>C]]</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rename!</span>(demand, <span class="op">:</span>C <span class="op">=&gt;</span> <span class="op">:</span>Demand)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>demand[<span class="op">:</span>, <span class="op">:</span>Hour] <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu">nrow</span>(demand)</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="co"># plot demand</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(demand.Hour, demand.Demand, xlabel<span class="op">=</span><span class="st">"Hour of Year"</span>, ylabel<span class="op">=</span><span class="st">"Demand (MWh)"</span>, label<span class="op">=:</span><span class="cn">false</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: ArgumentError: "data/2013_hourly_load_NY.csv" is not a valid file or doesn't exist</code></pre>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: <strong>?(caption)</strong></figcaption><p></p>
</figure>
</div>
<p>Next, we load the generator data. This data includes fixed costs ($/MW installed), variable costs ($/MWh generated), and CO<sub>2</sub> emissions intensity (tCO<sub>2</sub>/MWh generated).</p>
<div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>gens <span class="op">=</span> <span class="fu">DataFrame</span>(CSV.<span class="fu">File</span>(<span class="st">"data/generators.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="tbl-generators" class="cell tbl-parent quarto-layout-panel anchored" data-tbl-cap="Generator type data, including fixed costs ($/MW installed), variable costs ($/MWh generated), and CO~2~ emissions intensity (tCO~2~/MWh generated)." data-execution_count="4">
<div class="panel-caption table-caption">
<p><strong>?(caption)</strong></p>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-error quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<pre><code>LoadError: ArgumentError: "data/generators.csv" is not a valid file or doesn't exist</code></pre>
</div>
</div>
</div>
</div>
<p>Finally, we load the hourly solar and wind capacity factors, which are plotted in <a href="#fig-cf">Figure&nbsp;2</a>. These tell us the fraction of installed capacity which is expected to be available in a given hour for generation (typically based on the average meteorology).</p>
<div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># load capacify factors into a DataFrame</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>cap_factor <span class="op">=</span> <span class="fu">DataFrame</span>(CSV.<span class="fu">File</span>(<span class="st">"data/wind_solar_capacity_factors.csv"</span>))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># plot January capacity factors</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>p1 <span class="op">=</span> <span class="fu">plot</span>(cap_factor.Wind[<span class="fl">1</span><span class="op">:</span>(<span class="fl">24</span><span class="op">*</span><span class="fl">31</span>)], label<span class="op">=</span><span class="st">"Wind"</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">plot!</span>(cap_factor.Solar[<span class="fl">1</span><span class="op">:</span>(<span class="fl">24</span><span class="op">*</span><span class="fl">31</span>)], label<span class="op">=</span><span class="st">"Solar"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">xaxis!</span>(<span class="st">"Hour of the Month"</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="fu">yaxis!</span>(<span class="st">"Capacity Factor"</span>)</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>p2 <span class="op">=</span> <span class="fu">plot</span>(cap_factor.Wind[<span class="fl">4344</span><span class="op">:</span><span class="fl">4344</span><span class="fu">+</span>(<span class="fl">24</span><span class="op">*</span><span class="fl">31</span>)], label<span class="op">=</span><span class="st">"Wind"</span>)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="fu">plot!</span>(cap_factor.Solar[<span class="fl">4344</span><span class="op">:</span><span class="fl">4344</span><span class="fu">+</span>(<span class="fl">24</span><span class="op">*</span><span class="fl">31</span>)], label<span class="op">=</span><span class="st">"Solar"</span>)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="fu">xaxis!</span>(<span class="st">"Hour of the Month"</span>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="fu">yaxis!</span>(<span class="st">"Capacity Factor"</span>)</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="fu">display</span>(p1)</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="fu">display</span>(p2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-cf" class="cell quarto-layout-panel" data-execution_count="5">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output cell-output-error quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<pre><code>LoadError: ArgumentError: "data/wind_solar_capacity_factors.csv" is not a valid file or doesn't exist</code></pre>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;2: Hourly solar and wind capacity factors.</figcaption><p></p>
</figure>
</div>
</div>
<p>You have been asked to develop a generating capacity expansion plan for the utility in Riley, NY, which currently has no existing electrical generation infrastructure. The utility can build any of the following plant types: geothermal, coal, natural gas combined cycle gas turbine (CCGT), natural gas combustion turbine (CT), solar, and wind.</p>
<p>While coal, CCGT, and CT plants can generate at their full installed capacity, geothermal plants operate at maximum 85% capacity, and solar and wind available capacities vary by the hour depend on the expected meteorology. The utility will also penalize any non-served demand at a rate of $1000/MWh.</p>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Significant Digits
</div>
</div>
<div class="callout-body-container callout-body">
<p>Use <code>round(x; digits=n)</code> to report values to the appropriate precision!</p>
</div>
</div>
<div class="callout callout-style-simple callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Getting Variable Output Values
</div>
</div>
<div class="callout-body-container callout-body">
<p><code>value.(x)</code> will report the values of a <code>JuMP</code> variable <code>x</code>, but it will return a special container which holds other information about <code>x</code> that is useful for <code>JuMP</code>. This means that you can’t use this output directly for further calculations. To just extract the values, use <code>value.(x).data</code>.</p>
</div>
</div>
<section id="problem-1-22-points" class="level3 cell markdown">
<h3 class="anchored" data-anchor-id="problem-1-22-points">Problem 1 (22 points)</h3>
<p>Your first task is to find a capacity expansion plan which minimizes total costs of investment and operation.</p>
</section>
<section id="problem-1.1-2-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-1.1-2-points">Problem 1.1 (2 points)</h4>
<p>Identify and define the decision variables for the problem. Make sure to include units.</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>We need the following notation:</p>
<ul>
<li><span class="math inline">\(x_g\)</span>: built capacity for generator <span class="math inline">\(g\)</span> in MW;</li>
<li><span class="math inline">\(y_{g,t}\)</span>: generated power from generator <span class="math inline">\(g\)</span> in time period <span class="math inline">\(t\)</span> in MWh;</li>
<li><span class="math inline">\(NSE_t\)</span>: unserved energy in time <span class="math inline">\(t\)</span>.</li>
</ul>
<section id="problem-1.2-3-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-1.2-3-points">Problem 1.2 (3 points)</h4>
<p>Formulate the objective function. Make sure to include any needed derivations or justifications for your equation(s) and define any additional required notation beyond that introduced in Problem 1.1.</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>The objective is to minimize total costs (<span class="math inline">\(C\)</span>) of expansion and generation, which we can split into fixed costs (<span class="math inline">\(\text{FixedCost}\)</span>, $/MW installed), variable costs of generation ($/MWh generated), and the non-served energy penalty ($/MWh unserved).</p>
<p>We can write this as <span class="math display">\[\min_{x_g, y_{g,t}} \sum_{g \in \mathcal{G}} \text{FixedCost}_g \times x_g + \sum_{t \in \mathcal{T}} \text{VarCost}_g \times y_{g,t} + \sum_{t \in \mathcal{T}} \text{NSECost}_t \times NSE_t,\]</span> where <span class="math inline">\(\mathcal{G}\)</span> is the set of generators and <span class="math inline">\(\mathcal{T}\)</span> is the set of time periods.</p>
<section id="problem-1.3-4-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-1.3-4-points">Problem 1.3 (4 points)</h4>
<p>Derive all relevant constraints. Make sure to include any needed justifications or derivations.</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>The first constraint is non-negativity; all decision variables must be greater than or equal to zero, so <span class="math inline">\(x_g \geq 0\)</span>, <span class="math inline">\(y_{g,t} \geq 0\)</span>, and <span class="math inline">\(NSE_t \geq 0\)</span>.</p>
<p>Second, the amount of generated power is limited by the capacity of that plant type. This is slightly more complicated because we need to account for the variable capacity factors of the wind and solar plants. We can summarize this with <span class="math display">\[y_{g,t} \leq x_g \times cf_{g,t}\]</span> for all <span class="math inline">\(t \in \mathcal{T}\)</span>, where <span class="math inline">\(cf_{g,t}\)</span> is the capacity factor for plant type <span class="math inline">\(g\)</span> in time <span class="math inline">\(t\)</span>. We can either just assume that <span class="math inline">\(cf_{g,t} = 1\)</span> for non-variable plants <span class="math inline">\(g\)</span> (other than geothermal, where <span class="math inline">\(cf = 0.85\)</span>) or we can split this into multiple constraints.</p>
<p>Third, the sum of generated power and un-served energy must be equal to the demand in that time period: <span class="math display">\[\sum_{g \in G} y_{g,t} + NSE_t = d_t\]</span> for all <span class="math inline">\(t \in \mathcal{T}\)</span>, where <span class="math inline">\(d_t\)</span> is the demand in MWh.</p>
<section id="problem-1.4-3-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-1.4-3-points">Problem 1.4 (3 points)</h4>
<p>Implement your optimization problem in <code>JuMP</code>.</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>As mentioned above, we can either split the capacity constraint into multiple statements, or we can set up a single capacity factor matrix which combines the variable wind and solar capacity factors and constant values of 1 for the other plant types. We will do the second in this solution, but the first would get you the same answers (you would just have one-two more constraints defined, depending on the specifics).</p>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define sets</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>G <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu">nrow</span>(gens)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>T <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu">nrow</span>(demand)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># set up auxiliary parameters</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>NSECost <span class="op">=</span> <span class="fl">1000</span> <span class="co"># cost of unserved energy</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># capacity factor matrix</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>cf_constant <span class="op">=</span> <span class="fu">ones</span>(T[<span class="kw">end</span>], G[<span class="kw">end</span><span class="op">-</span><span class="fl">2</span>]) <span class="co"># last two plants are wind and solar, so drop those</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>cf_constant[<span class="op">:</span>, <span class="fl">1</span>] <span class="op">.=</span> <span class="fl">0.85</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>cf <span class="op">=</span> <span class="fu">hcat</span>(cf_constant, cap_factor[!, <span class="op">:</span>Wind], cap_factor[!, <span class="op">:</span>Solar]) <span class="co"># append wind and solar capacity factors</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># set up model object</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>gencap <span class="op">=</span> <span class="fu">Model</span>(HiGHS.Optimizer) <span class="co"># use the HiGHS LP solver</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co"># define variables</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="pp">@variable</span>(gencap, x[g <span class="kw">in</span> G] <span class="op">&gt;=</span> <span class="fl">0</span>) <span class="co"># installed capacity</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="pp">@variable</span>(gencap, y[g <span class="kw">in</span> G, t <span class="kw">in</span> T] <span class="op">&gt;=</span> <span class="fl">0</span>) <span class="co"># generated power</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="pp">@variable</span>(gencap, nse[t <span class="kw">in</span> T] <span class="op">&gt;=</span> <span class="fl">0</span>) <span class="co"># unserved energy</span></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="co"># define objective: minimize sum of fixed costs, variable costs of generation, </span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co"># and non-served energy penalty</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="pp">@objective</span>(gencap, Min, <span class="fu">sum</span>(gens[<span class="op">:</span>, <span class="op">:</span>FixedCost] <span class="op">.*</span> x) <span class="op">+</span> </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(gens[<span class="op">:</span>, <span class="op">:</span>VarCost] <span class="op">.*</span> [<span class="fu">sum</span>(y[g, <span class="op">:</span>]) for g <span class="kw">in</span> G]) <span class="op">+</span> </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>    NSECost <span class="op">*</span> <span class="fu">sum</span>(nse))</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co"># define constraints</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="pp">@constraint</span>(gencap, capacity[g <span class="kw">in</span> G, t <span class="kw">in</span> T], y[g, t] <span class="op">&lt;=</span> x[g] <span class="op">*</span> cf[t, g]) <span class="co"># capacity constraint</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="pp">@constraint</span>(gencap, demand_met[t <span class="kw">in</span> T], <span class="fu">sum</span>(y[<span class="op">:</span>, t]) <span class="op">+</span> nse[t] <span class="op">==</span> demand.Demand[t]) <span class="co"># demand constraint</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `gens` not defined</code></pre>
</div>
</div>
<section id="problem-1.5-5-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-1.5-5-points">Problem 1.5 (5 points)</h4>
<p>Find the optimal solution. How much should the utility build of each type of generating plant? What will the total cost be? How much energy will be non-served?</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>First, let’s find the solution.</p>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">optimize!</span>(gencap);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `gencap` not defined</code></pre>
</div>
</div>
<p>We can find how much generating capacity we want to build for each plant type by querying the relevant decision variable <code>x</code>. We will turn this into a DataFrame to make the presentation easier.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>built_cap <span class="op">=</span> <span class="fu">value</span>.(x).data</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">DataFrame</span>(Plant<span class="op">=</span>gens.Plant, Capacity<span class="op">=</span><span class="fu">round</span>.(built_cap; digits<span class="op">=</span><span class="fl">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `x` not defined</code></pre>
</div>
</div>
<p>Similarly, we can find the total amount of un-served energy by adding up <code>nse[t]</code>.</p>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">value</span>.(nse).data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `nse` not defined</code></pre>
</div>
</div>
<p>This plan results in 6000 MWh of un-served energy throughout the year.</p>
<p>Finally, to get the total cost of the system we can use <code>objective_value</code>:</p>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">objective_value</span>(gencap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `gencap` not defined</code></pre>
</div>
</div>
<p>The total cost of this plan is <span class="math inline">\(\$6.4 \times 10^8\)</span>.</p>
<section id="problem-1.6-5-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-1.6-5-points">Problem 1.6 (5 points)</h4>
<p>What fraction of annual generation does each plant type produce? How does this compare to the breakdown of built capacity that you found in Problem 1.5? Do these results make sense given the generator data?</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>To find the total annual generation from each plant, we want to sum up the values of the variable <code>y</code> along the time dimension.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>annual_gen <span class="op">=</span> [<span class="fu">sum</span>(<span class="fu">value</span>.(y[g, <span class="op">:</span>]).data) for g <span class="kw">in</span> G]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `G` not defined</code></pre>
</div>
</div>
<p>We can then convert this into fractions of total generation, which we can compare to fractions of built capacity.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>annual_gen_frac <span class="op">=</span> annual_gen <span class="op">./</span> <span class="fu">sum</span>(annual_gen)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>built_frac <span class="op">=</span> built_cap <span class="op">./</span> <span class="fu">sum</span>(built_cap)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="fu">DataFrame</span>(Plant<span class="op">=</span>gens[!, <span class="op">:</span>Plant], Built<span class="op">=</span>built_frac, Generated<span class="op">=</span>annual_gen_frac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `annual_gen` not defined</code></pre>
</div>
</div>
<p>One observation is that that we have to overbuild the fraction of combustion turbine gas plants (NG CT) as these are needed when wind and solar is low, but otherwise are less commonly used. We also have to slightly overbuild wind and solar relative to the power generated by these technologies, as although they are free to generate, they can be severely constrained in terms of capacity in a given hour.</p>
<section id="problem-2-18-points" class="level3 cell markdown">
<h3 class="anchored" data-anchor-id="problem-2-18-points">Problem 2 (18 points)</h3>
<p>The NY state legislature is considering enacting an annual CO<sub>2</sub> limit, which for the utility would limit the emissions in its footprint to 1.5 MtCO<sub>2</sub>/yr.</p>
</section>
<section id="problem-2.1-3-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-2.1-3-points">Problem 2.1 (3 points)</h4>
<p>What changes are needed to your linear program from Problem 1? Re-formulate any part of the problem that has changed.</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>The only change is to add in a constraint for the CO<sub>2</sub> limit. Let <span class="math inline">\(emis_g\)</span> be the CO<sub>2</sub> emissions factor (tCO<sub>2</sub>/MWh generated) for plant <span class="math inline">\(g\)</span>. Then this constraint is: <span class="math display">\[\sum_{g \in G} emis_g \times \sum_{t \in T} y_{g,t} \leq 1500000.\]</span></p>
<section id="problem-2.2-3-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-2.2-3-points">Problem 2.2 (3 points)</h4>
<p>Implement the new optimization problem in <code>JuMP</code>.</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>We can actually just add a new constraint to the <code>JuMP</code> model (just be careful when evaluating the notebook cells!), but if you re-formulated the model object with a new name, that works as well.</p>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add in the new constraint</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="pp">@constraint</span>(gencap, co2, <span class="fu">sum</span>(gens[<span class="op">:</span>, <span class="op">:</span>Emissions] <span class="op">.*</span> [<span class="fu">sum</span>(y[g, <span class="op">:</span>]) for g <span class="kw">in</span> G]) <span class="op">&lt;=</span> <span class="fl">1500000</span>);</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `gencap` not defined</code></pre>
</div>
</div>
<section id="problem-2.3-5-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-2.3-5-points">Problem 2.3 (5 points)</h4>
<p>Find the optimal solution. How much should the utility build of each type of generating plant? What is different from your plan from Problem 1? Do these changes make sense?</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>Find the new solution:</p>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">optimize!</span>(gencap)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>built_cap_co2 <span class="op">=</span> <span class="fu">value</span>.(x).data</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">DataFrame</span>(Plant<span class="op">=</span>gens.Plant, Capacity<span class="op">=</span><span class="fu">round</span>.(built_cap_co2; digits<span class="op">=</span><span class="fl">0</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `gencap` not defined</code></pre>
</div>
</div>
<p>To meet the emissions constraint, we build a reduced amount of natural gas, which creates some interesting changes in the rest of the mix. This natural gas capacity is replaced by a combination of 271 MW of geothermal (which was previously zero), an additional 2000 MW of wind capacity, and slightly more solar. These massive increases in wind are required to ensure adequate generation when solar is low, when otherwise we could rely on gas for that purpose.</p>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">value</span>.(nse).data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `nse` not defined</code></pre>
</div>
</div>
<p>We also increase the amount of non-served energy from Problem 1 by about 50% due to the reduced amount of built natural gas capacity.</p>
<section id="problem-2.4-5-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-2.4-5-points">Problem 2.4 (5 points)</h4>
<p>What fraction of annual generation does each plant type produce? How does this compare to the breakdown of built capacity that you found in Problem 2.3? What are the differences between these results and your plan from Problem 1?</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>We can just repeat the process from Problem 1.6.</p>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>annual_gen_co2 <span class="op">=</span> [<span class="fu">sum</span>(<span class="fu">value</span>.(y[g, <span class="op">:</span>]).data) for g <span class="kw">in</span> G]</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>annual_gen_frac_co2 <span class="op">=</span> annual_gen_co2 <span class="op">./</span> <span class="fu">sum</span>(annual_gen_co2)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>built_frac_co2 <span class="op">=</span> built_cap_co2 <span class="op">./</span> <span class="fu">sum</span>(built_cap_co2)</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="fu">DataFrame</span>(Plant<span class="op">=</span>gens[!, <span class="op">:</span>Plant], Built_CO2<span class="op">=</span>built_frac_co2, Generated_CO2<span class="op">=</span>annual_gen_frac_co2, Built_Old<span class="op">=</span>built_frac, Generated_Old<span class="op">=</span>annual_gen_frac)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `G` not defined</code></pre>
</div>
</div>
<p>The impact of the CO<sub>2</sub> constraint is similar to Problem 2.3: we rely on geothermal and wind heavily, so the total generation percentages is higher than previously (and for geothermal, higher than its built capacity percentage). Meanwhile, NG CT generation is limited to emergency shortfalls, and it represents only 1% of total generation. We also use NG CCGT a lot less, even though its built capacity isn’t much lower in absolute terms.</p>
<section id="problem-2.5-2-points" class="level4 cell markdown">
<h4 class="anchored" data-anchor-id="problem-2.5-2-points">Problem 2.5 (2 points)</h4>
<p>What would the value to the utility be of allowing it to emit an additional 1000 tCO<sub>2</sub>/yr? An additional 5000?</p>
</section>
<p><strong><em>Solution</em></strong>:</p>
<p>To answer this, we want to find the shadow price of the CO<sub>2</sub> emissions constraint.</p>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">shadow_price</span>(co2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>LoadError: UndefVarError: `co2` not defined</code></pre>
</div>
</div>
<p>Thus, every extra tCO<sub>2</sub>/yr allowed would reduce the cost of generation by $183. So an extra 1000 tCO<sub>2</sub>/yr would correspond to a value of $183,000, since the objective and constraints are linear. And an extra 5000 tCO<sub>2</sub>/yr would be worth $915,000.</p>
</section>
<section id="references" class="level2 cell markdown">
<h2 class="anchored" data-anchor-id="references">References</h2>
<p>List any external references consulted, including classmates.</p>
</section>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Handle positioning of the toggle
      window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          trigger: 'click',
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          positionFixed: true,
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Content <i class="fa-solid fa-copyright" aria-label="copyright"></i> 2023 by <a href="https://viveks.me">Vivek Srikrishnan</a>. See the <a href="../../about.html">About page</a> for credit information.<br> All content licensed under a <i class="fa-brands fa-creative-commons" aria-label="creative-commons"></i> <i class="fa-brands fa-creative-commons-by" aria-label="creative-commons-by"></i> <i class="fa-brands fa-creative-commons-nc" aria-label="creative-commons-nc"></i> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International license (CC BY-NC-SA 4.0)</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">Made with <a href="https://julialang.org">Julia</a> and <a href="https://quarto.org/">Quarto</a><br> <a href="https://www.github.com/vsrikrish/environmental-systems-analysis">View the source at <i class="fa-brands fa-github" aria-label="github"></i> GitHub</a></div>
  </div>
</footer>



</body></html>
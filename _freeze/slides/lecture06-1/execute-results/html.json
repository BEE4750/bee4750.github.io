{
  "hash": "f352d5b2227089bd4733f816cb32322f",
  "result": {
    "markdown": "---\ntitle: \"Prescriptive Modeling\"\nsubtitle: \"Lecture 13\"\nauthor: \"Vivek Srikrishnan\"\ncourse: \"BEE 4750\"\ninstitution: \"Cornell University\"\ndate: \"September 25, 2023\"\nformat:\n    revealjs:\n        slide-number: c/t\n        show-slide-number: all\n        center-title-slide: true\n        width: 1280\n        height: 720\n        transition: none\n        toc: true\n        toc-depth: 1\n        toc-title: \"Overview\"\n        history: false\n        link-external-newwindow: true\n        theme: ../sass/slides.scss\n        footer: \"[BEE 4750, Environmental Systems Analysis](https://viveks.me/environmental-systems-analysis)\"\n        template-partials:\n            - title-slide.html\n        menu:\n            numbers: true\n        html-math-method: mathjax\n        include-in-header: mathjax-config.html\n        date-format: long\n        highlight-style: tango\n        code-line-numbers: false\n\nexecute:\n    freeze: auto\n---\n\n\n\n\n\n# Review and Questions\n\n## Last Classes\n\n- Simulation modeling as a means for data generation.\n- Uncertainty and Monte Carlo\n\n## Questions?\n\n:::: {.columns .center}\n::: {.column width=\"40%\"}\n![](images/vsrikrish-poll.png){fig-alt=\"Poll Everywhere QR Code\" fig-align=\"center\" width=\"100%\"}\n:::\n::: {.column width=60%}\n**Text**: VSRIKRISH to 22333\n\n**URL**: [https://pollev.com/vsrikrish](https://pollev.com/vsrikrish)\n<br><br>\n[See Results](https://www.polleverywhere.com/multiple_choice_polls/qKeig0hHShZYHAOmvZtZm?preview=true&controls=none){preview-link=\"true\"}\n:::\n::::\n\n\n\n# Decision Problems\n\n## Wastewater Model Revisited\n\n![Diagram of CRUD release from two factories](images/river_diagram.png)\n\nConsider the wastewater model from [Lecture 5](lecture02-2.qmd).\n\n## Wastewater Model Revisited\n\nEnvironmental authorities have sampled water from the river and determined that concentrations exceed the legal standard (1 mg/L).\n\nWe want to design a CRUD removal plan to get back in compliance.\n\n## Prescriptive Modeling\n\nIf we want to design a treatment strategy, we are now in the world of *prescriptive modeling*.\n\n**Recall**: Precriptive modeling is intended to specify an action, policy, or decision.\n\n::: {.fragment .fade-in}\n\n- Descriptive modeling question: \"What happens if I do something?\"\n- Prescriptive modeling question: \"What should I do?\"\n:::\n\n## Decision Models\n\nTo make a decision, we need certain pieces of information which:\n\n- define decision options (or **alternatives**);\n- provide one or more **objectives** to assess performance;\n- specify **constraints** to tell us what decisions are possible or acceptable.\n\n## Objectives\n\nTypical objectives can include:\n\n- Minimizing costs (or maximizing profits);\n- Minimizing environmental impacts;\n- Maximizing some other performance metric.\n\n## Constraints\n\nConstraints often come from engineering or societal restrictions.\n\n- Regulatory limits on pollution;\n- Supply constraints;\n- Budgetary constraints;\n- Engineering constraints.\n\n## Decision Model for the Wastewater Model\n\nLet's apply this framework to the CRUD release problem.\n\n- What might our objective be?\n- What constraints do we have?\n\n\n## Formulating an Objective\n\nLet's say that our objective is to minimize costs, and relevant constraints include the regulatory standard.\n\n::: {.fragment .fade-in}\n\nTreating CRUD costs $\\$50 E^2 \\text{ per } 1000 \\ \\text{m}^3,$ where $E$ is the treatment efficiency.\n\n:::\n\n## Formulating an Objective\n\n![Diagram of CRUD release from two factories](images/river_diagram.png)\n\nThis makes the daily treatment cost\n$$C(E_1, E_2) = 50(100)E_1^2 + 50(60)E_2^2 = 5000E_1^2 + 3000E_2^2.$$\n\n## Formulating an Objective\n\nDaily Treatment Cost (the **metric**): \n\n$$C(E_1, E_2) = 50(100)E_1^2 + 50(60)E_2^2 = 5000E_1^2 + 3000E_2^2.$$\n\nThen if the objective is to minimize the cost, we write:\n\n$$\\min_{E_1, E_2} 5000E_1^2 + 3000E_2^2.$$\n\n## Developing Constraints\n\nBut we can't choose just any $E_1$ and $E_2$ to minimize the cost, or we would just choose $E_1=E_2=0$.\n\n::: {.fragment .fade-in}\nFor example, we need to comply with the regulatory standard: \n\nCRUD concentration $< 1$ mg/l.\n:::\n\n## Developing Constraints\n\n**What information can we bring to bear?**\n\n::: {.fragment .fade-in}\nRecall (from a while ago) our assumption that CRUD decays as it moves downriver.\n:::\n\n::: {.fragment .fade-in}\n\nSince we know that the concentrations are highest at the points of discharge, we can check whether each of those points is in compliance with the standard.\n:::\n\n## Mass Balance at Release 1\n\n![](images/crud-release-1-treated.svg)\n\nTotal CRUD after factory 1 release: $\\color{blue}\\text{100} + \\color{red} 1000(1-E_1) \\color{black} \\ \\text{kg/d}$\n\n## Mass Balance at Release 1\n\n- Total CRUD after factory 1 release: $\\color{blue}\\text{100} + \\color{red} 1000(1-E_1) \\color{black} \\ \\text{kg/d}$\n- Our standard is $1 \\ \\text{mg/L} = 10^{-3} \\ \\text{kg/m}^3$\n- The volume of the inflow is $600,000 \\ \\text{m}^3\\text{/d}$.\n\nSo the constraint until we hit Release 2 is: \n$$100 + 1000(1-E_1) \\leq 600 \\Rightarrow \\boxed{1000E_1 \\geq 500}\n$$\n\n## Mass Balance at Release 2\n\n![](images/crud-release-2-treated.svg){fig-align=\"center\"}\n\nWe had derived that the CRUD concentration at release 2 is:\n\n$$(1100 - 1000E_1) \\exp(-0.18) + 1200(1 - E_2) \\ \\text{kg/d}.$$\n\n## Constraint at Release 2\n\nThe volume at release 2 is $660,000 \\ \\text{m}^3\\text{/d}$, so the constraint is:\n\n$$(1100 - 1000E_1) \\exp(-0.18) + 1200(1 - E_2) \\leq 660.$$\n\n## Constraint at Release 2\n\nSimplifying:\n\n$$\\begin{aligned}\n(1100 - 1000E_1) \\exp(-0.18) + 1200(1 - E_2) &\\leq 660  \\\\\\\\\n(1100 - 1000E_1) 0.835 + 1200(1 - E_2) &\\leq 660  \\\\\\\\\n2119 - 835E_1 - 1200E_2 &\\leq 660\n\\end{aligned}$$\n\n$$\\Rightarrow \\boxed{835E_1 + 1200E_2 \\geq 1459}$$\n\n## Model Formulation\n\nCombining our objective and our regulatory constraints:\n\n$$\\begin{alignat}{2}\n& \\min_{E_1, E_2} & 5000E_1^2 + 3000E_2^2 \\notag \\\\\\\\\n& \\text{subject to:} & 1000 E_1  &\\geq 500 \\notag \\\\\n& & 35E_1 + 1200E_2  &\\geq 1459 \\notag\n\\end{alignat}$$\n\n::: {.fragment .fade-in}\n\n**Is this complete?**\n:::\n\n## Model Formulation\n\n$$\\begin{alignat}{3}\n& \\min_{E_1, E_2} &\\quad  5000E_1^2 + 3000E_2^2 &  \\\\\\\\\n& \\text{subject to:} & 1000 E_1 &\\geq 500 \\\\\n& & 835E_1 + 1200E_2 &\\geq 1459 \\\\\n& & \\color{purple}E_1, E_2 &\\;\\color{purple}\\geq 0 \\\\\n& & \\color{purple}E_1, E_2 &\\;\\color{purple}\\leq 1\n\\end{alignat}$$\n\nThe \n\n# Key Takeaways\n\n## Key Takeaways\n\n- Prescriptive modeling involves **decision models**.\n- Key components of a decision model:\n  - Objectives;\n  - Constraints.\n- Need to bring to bear relevant engineering, economic, and environmental information to formulate these.\n\n# Upcoming Schedule\n\n## Next Classes\n\n**Wednesday**: How do we solve this decision problem (and many others)?\n\n**Friday**: Introduction to linear programming.\n\n## Assessments\n\n- HW 3 assigned today, due 10/6.\n\n",
    "supporting": [
      "lecture06-1_files/figure-revealjs"
    ],
    "filters": [],
    "includes": {}
  }
}